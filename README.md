# Yahoo!ニュースコメントフィルタリングWebサイト
## 概要
Yahoo!newsのコメント欄から建設的なコメントを抽出するWebサイトです．
建設的度合いは適宜ユーザが調節することができます．
フィルタリング機能の有無や閾値設定の違いに応じて複数のバージョンを用意しています。
WebサイトのフレームワークはStreamlitです．

## ファイル構成

### 1. `website.py`
Yahoo!ニュースのコメントをスクレイピングするスクリプトです。
- ユーザが入力したコメント欄のURLにアクセス。
- 4ページ分のコメントを収集。
- ランダムで15件のコメントを採用。
- ページ遷移とコメントの選択に制限を設けることで、応答時間を短縮（GPTのAPIを使用しているため処理時間が長くなりがち）。

### 2.`Attri_Cos_Senti_Stance.py`
コメントの特徴量を抽出するスクリプトです。
- 属性
- コサイン類似度
- 極性強度
- スタンス

### 3.  `back_app_nonfilter.py`
フィルタリング機能がないコメント表示Webサイトを動かすスクリプトです。
- `website.py` で収集したコメントをそのまま表示。

### 4. `back_app_RF.py`
フィルタリング機能・スライダー機能付きのコメント表示Webサイトを動かすスクリプトです。
フロントエンド，バックエンドの両方を行っている．
- フロントエンド：
  - ユーザがURLを入力するボックス
  - ユーザが閾値を設定するスライダー
  - フィルタリング結果の表示
- バックエンド：
  - `Attri_Cos_Senti_Stance.py` で抽出したコメントの特徴量をモデルに入力。
  - 特徴量をもとに、モデルが建設的度合い（0～3）を推定。
  - ユーザが設定した閾値以上のコメントの選択

### 5. `comment_classifier.pkl`
コメントの建設的度合いを推定するモデル．
ランダムフォレスト分類モデルにコメントセットを学習させたもの．
モデルのハイパーパラメータはn_estimators: 100，max_depth: 3，min_samples_split: 10

### 6. `back_app_threshold.py`
- `back_app_RF.py` と同様の処理を行うが、ユーザによる閾値設定はなく、閾値は2に固定。

## 環境構築
### 必要ライブラリ
以下のライブラリを事前にインストールしてください。
```bash
pip install -r requirements.txt
```

### 実行方法
back_app_nonfilter.py，back_app_RF.py，back_app_threshold.pyを実行．
適宜実行したいファイル名に変更してください．
```
streamlit run back_app_RF.py
```

## 注意事項
- Yahoo!ニュースのページ構成が変更されると、スクレイピングが正常に動作しない可能性があります。
- スクレイピングに関する規約を遵守し、適切にご利用ください。
- GPTのAPIを使用しているため、応答時間が長くなる可能性があります。



